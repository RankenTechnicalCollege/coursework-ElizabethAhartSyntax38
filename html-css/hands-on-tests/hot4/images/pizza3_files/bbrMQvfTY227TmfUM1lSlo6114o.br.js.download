var CopilotSearch;(function(n){function c(c,l,a){a===void 0&&(a="");t=_qs("#b_copilot_search .b_copilot_menu_more");i=_qs(u);f=c;e=l;o=a;sj_be(t,"click",v(function(){t.setAttribute("aria-expanded",i.classList.contains("hidden")?"true":"false");i.classList.toggle("hidden");n.Helper.writeLog(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.MenuToggle);sj_evt.fire(h)},100));sj_be(t,"click",function(n){n.stopPropagation()});sj_be(_d.body,"click",function(){sj_evt.fire(r)});sj_evt.bind(r,s);y();n.ComposerFileUploadMenu&&n.ComposerFileUploadMenu.initializeImageUpload()}function l(){Lib.CssClass.add(t,n.Helper.hiddenClassName)}function a(){Lib.CssClass.remove(t,n.Helper.hiddenClassName)}function v(n,t){var i;return function(){sb_ct(i);i=sb_st(n,t)}}function s(){_d.querySelectorAll(u).forEach(function(t){Lib.CssClass.add(t,n.Helper.hiddenClassName)})}function y(){var i=_qs(".b_copilot_menu_new_search"),r=function(){if(f){p();return}var t=n.Helper.getLastTurnId(),i=n.Helper.getConversationId(),r=n.Helper.getResponseId();n.Helper.logCustomData(n.Helper.ClientInst.CopilotInteraction,n.Helper.LogNames.NewSearchClicked,"CSearch",{ConversationId:i,TurnIndex:t,ResponseId:r},"");n.AttachmentManager&&n.AttachmentManager.clearAttachmentsData();n.changeMode&&n.changeMode(n.Helper.CopilotMode.Zero);n.ZeroPage&&n.ZeroPage.show()};sj_be(i,"click",function(){r()});sj_be(i,"keydown",function(n){(n.key==="Enter"||n.key===" ")&&r();(n.key==="Escape"||n.key==="Tab")&&(s(),t.setAttribute("aria-expanded","false"),t.focus())})}function p(){var n=window.location.origin+"/copilotsearch?q=&FORM="+o;e?window.open(n,"_blank"):window.location.href=n}var r="cpltsrch_outClickCloseMenu",h="cpltsrch_outClickCloseModelSwitching",u="#b_copilot_search .b_copilot_menu_cont",t,i,f=!1,e=!1,o="",w={init:c,hideMenu:l,showMenu:a};n.ComposerMenu=w})(CopilotSearch||(CopilotSearch={}))